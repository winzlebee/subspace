import{a as y,f as E,c as Ee,t as Oe,d as Ue}from"../chunks/Dy-qOuCo.js";import{h as Q,c as Pe,X as Ut,l as We,a as Bt,b as zt,D as s,r as Ht,H as Rt,s as st,e as qe,n as Le,a6 as Pt,ay as Wt,ai as nt,i as we,m as Xe,aR as qt,t as Jt,aS as ut,aK as Vt,aT as Ft,aw as et,aU as Kt,a4 as ot,aV as Yt,aW as Xt,z as Qt,aX as oe,j as ft,p as pt,aY as Je,q as ht,aZ as Gt,a_ as Zt,av as ea,k as ta,as as aa,a$ as ra,b0 as sa,b1 as na,b2 as oa,b3 as ia,b4 as la,aO as mt,u as ca,g as va,b5 as da,O as te,T as i,V as b,U as o,Q as D,R as ae,aP as V,B as U,C as ua,P as ke,aQ as Me,I as fa,b6 as pa,d as ha,aD as ma,aj as ba,W as bt}from"../chunks/jPXpONmM.js";import{i as O,b as ga}from"../chunks/bMZSfw0A.js";import{a as H,s as ue}from"../chunks/C5ABWx1_.js";import{a as gt,c as Ae,v as _t,m as me,s as ye,b as je,d as xt,e as tt,f as wt,g as _a,h as xa,i as Qe,j as Ie,k as yt,l as kt,n as St,o as Ve,p as Fe,t as it,q as wa,r as ya}from"../chunks/QhsLRqcb.js";import{s as B,e as R}from"../chunks/Ci1e0nyO.js";import{i as at}from"../chunks/B_v7Z973.js";function lt(e,t){return t}function ka(e,t,a){for(var l=[],u=t.length,c,d=t.length,x=0;x<u;x++){let $=t[x];pt($,()=>{if(c){if(c.pending.delete($),c.done.add($),c.pending.size===0){var w=e.outrogroups;Ge(et(c.done)),w.delete(c),w.size===0&&(e.outrogroups=null)}}else d-=1},!1)}if(d===0){var p=l.length===0&&a!==null;if(p){var k=a,f=k.parentNode;ea(f),f.append(k),e.items.clear()}Ge(t,!p)}else c={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(c)}function Ge(e,t=!0){for(var a=0;a<e.length;a++)ta(e[a],t)}var ct;function de(e,t,a,l,u,c=null){var d=e,x=new Map,p=(t&ut)!==0;if(p){var k=e;d=Q?Pe(Ut(k)):k.appendChild(We())}Q&&Bt();var f=null,$=Vt(()=>{var h=a();return Ft(h)?h:h==null?[]:et(h)}),w,M=!0;function A(){n.fallback=f,Sa(n,w,d,t,l),f!==null&&(w.length===0?(f.f&oe)===0?ft(f):(f.f^=oe,Te(f,null,d)):pt(f,()=>{f=null}))}var S=zt(()=>{w=s($);var h=w.length;let L=!1;if(Q){var N=Ht(d)===Rt;N!==(h===0)&&(d=st(),Pe(d),qe(!1),L=!0)}for(var g=new Set,T=we,m=Jt(),r=0;r<h;r+=1){Q&&Le.nodeType===Pt&&Le.data===Wt&&(d=Le,L=!0,qe(!1));var v=w[r],C=l(v,r),I=M?null:x.get(C);I?(I.v&&nt(I.v,v),I.i&&nt(I.i,r),m&&T.unskip_effect(I.e)):(I=$a(x,M?d:ct??(ct=We()),v,C,r,u,t,a),M||(I.e.f|=oe),x.set(C,I)),g.add(C)}if(h===0&&c&&!f&&(M?f=Xe(()=>c(d)):(f=Xe(()=>c(ct??(ct=We()))),f.f|=oe)),h>g.size&&qt(),Q&&h>0&&Pe(st()),!M)if(m){for(const[j,_]of x)g.has(j)||T.skip_effect(_.e);T.oncommit(A),T.ondiscard(()=>{})}else A();L&&qe(!0),s($)}),n={effect:S,items:x,outrogroups:null,fallback:f};M=!1,Q&&(d=Le)}function Ce(e){for(;e!==null&&(e.f&Gt)===0;)e=e.next;return e}function Sa(e,t,a,l,u){var I,j,_,z,Z,re,ee,Y,F;var c=(l&Zt)!==0,d=t.length,x=e.items,p=Ce(e.effect.first),k,f=null,$,w=[],M=[],A,S,n,h;if(c)for(h=0;h<d;h+=1)A=t[h],S=u(A,h),n=x.get(S).e,(n.f&oe)===0&&((j=(I=n.nodes)==null?void 0:I.a)==null||j.measure(),($??($=new Set)).add(n));for(h=0;h<d;h+=1){if(A=t[h],S=u(A,h),n=x.get(S).e,e.outrogroups!==null)for(const P of e.outrogroups)P.pending.delete(n),P.done.delete(n);if((n.f&oe)!==0)if(n.f^=oe,n===p)Te(n,null,a);else{var L=f?f.next:p;n===e.effect.last&&(e.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),ve(e,f,n),ve(e,n,L),Te(n,L,a),f=n,w=[],M=[],p=Ce(f.next);continue}if((n.f&Je)!==0&&(ft(n),c&&((z=(_=n.nodes)==null?void 0:_.a)==null||z.unfix(),($??($=new Set)).delete(n))),n!==p){if(k!==void 0&&k.has(n)){if(w.length<M.length){var N=M[0],g;f=N.prev;var T=w[0],m=w[w.length-1];for(g=0;g<w.length;g+=1)Te(w[g],N,a);for(g=0;g<M.length;g+=1)k.delete(M[g]);ve(e,T.prev,m.next),ve(e,f,T),ve(e,m,N),p=N,f=m,h-=1,w=[],M=[]}else k.delete(n),Te(n,p,a),ve(e,n.prev,n.next),ve(e,n,f===null?e.effect.first:f.next),ve(e,f,n),f=n;continue}for(w=[],M=[];p!==null&&p!==n;)(k??(k=new Set)).add(p),M.push(p),p=Ce(p.next);if(p===null)continue}(n.f&oe)===0&&w.push(n),f=n,p=Ce(n.next)}if(e.outrogroups!==null){for(const P of e.outrogroups)P.pending.size===0&&(Ge(et(P.done)),(Z=e.outrogroups)==null||Z.delete(P));e.outrogroups.size===0&&(e.outrogroups=null)}if(p!==null||k!==void 0){var r=[];if(k!==void 0)for(n of k)(n.f&Je)===0&&r.push(n);for(;p!==null;)(p.f&Je)===0&&p!==e.fallback&&r.push(p),p=Ce(p.next);var v=r.length;if(v>0){var C=(l&ut)!==0&&d===0?a:null;if(c){for(h=0;h<v;h+=1)(ee=(re=r[h].nodes)==null?void 0:re.a)==null||ee.measure();for(h=0;h<v;h+=1)(F=(Y=r[h].nodes)==null?void 0:Y.a)==null||F.fix()}ka(e,r,C)}}c&&ht(()=>{var P,X;if($!==void 0)for(n of $)(X=(P=n.nodes)==null?void 0:P.a)==null||X.apply()})}function $a(e,t,a,l,u,c,d,x){var p=(d&Yt)!==0?(d&Xt)===0?Qt(a,!1,!1):ot(a):null,k=(d&Kt)!==0?ot(u):null;return{v:p,i:k,e:Xe(()=>(c(t,p??a,k??u,x),()=>{e.delete(l)}))}}function Te(e,t,a){if(e.nodes)for(var l=e.nodes.start,u=e.nodes.end,c=t&&(t.f&oe)===0?t.nodes.start:a;l!==null;){var d=aa(l);if(c.before(l),l===u)return;l=d}}function ve(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function Ca(e,t,a){var l=e==null?"":""+e;return l===""?null:l}function be(e,t,a,l,u,c){var d=e.__className;if(Q||d!==a||d===void 0){var x=Ca(a);(!Q||x!==e.getAttribute("class"))&&(x==null?e.removeAttribute("class"):e.className=x),e.__className=a}return c}const Ma=Symbol("is custom element"),Ta=Symbol("is html");function Se(e){if(Q){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var l=e.value;K(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var u=e.checked;K(e,"checked",null),e.checked=u}}};e.__on_r=a,ht(a),ra()}}function ja(e,t){var a=$t(e);a.checked!==(a.checked=t??void 0)&&(e.checked=t)}function K(e,t,a,l){var u=$t(e);Q&&(u[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||u[t]!==(u[t]=a)&&(t==="loading"&&(e[sa]=a),a==null?e.removeAttribute(t):typeof a!="string"&&Ea(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function $t(e){return e.__attributes??(e.__attributes={[Ma]:e.nodeName.includes("-"),[Ta]:e.namespaceURI===na})}var vt=new Map;function Ea(e){var t=e.getAttribute("is")||e.nodeName,a=vt.get(t);if(a)return a;vt.set(t,a=[]);for(var l,u=e,c=Element.prototype;c!==u;){l=ia(u);for(var d in l)l[d].set&&a.push(d);u=oa(u)}return a}function $e(e,t,a=t){var l=new WeakSet;la(e,"input",async u=>{var c=u?e.defaultValue:e.value;if(c=Ke(e)?Ye(c):c,a(c),we!==null&&l.add(we),await mt(),c!==(c=t())){var d=e.selectionStart,x=e.selectionEnd,p=e.value.length;if(e.value=c??"",x!==null){var k=e.value.length;d===x&&x===p&&k>p?(e.selectionStart=k,e.selectionEnd=k):(e.selectionStart=d,e.selectionEnd=Math.min(x,k))}}}),(Q&&e.defaultValue!==e.value||ca(t)==null&&e.value)&&(a(Ke(e)?Ye(e.value):e.value),we!==null&&l.add(we)),va(()=>{var u=t();if(e===document.activeElement){var c=da??we;if(l.has(c))return}Ke(e)&&u===Ye(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function Ke(e){var t=e.type;return t==="number"||t==="range"}function Ye(e){return e===""?null:+e}function Ct(e){return function(...t){var a=t[0];a.target===this&&(e==null||e.apply(this,t))}}function Ze(e){return function(...t){var a=t[0];return a.preventDefault(),e==null?void 0:e.apply(this,t)}}const Aa="http://localhost:3001/api";function Ia(){const e=localStorage.getItem("token"),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t}async function G(e,t={}){const a=await fetch(`${Aa}${e}`,{...t,headers:{...Ia(),...t.headers||{}}});if(!a.ok){const l=await a.text();throw new Error(`HTTP ${a.status}: ${l}`)}if(a.status!==204)return a.json()}async function Na(e,t){return G("/register",{method:"POST",body:JSON.stringify({username:e,password:t})})}async function La(e,t){return G("/login",{method:"POST",body:JSON.stringify({username:e,password:t})})}async function Da(){return G("/me")}async function Oa(e){return G("/me",{method:"PATCH",body:JSON.stringify(e)})}async function Ua(){return G("/servers")}async function Ba(e,t){return G("/servers",{method:"POST",body:JSON.stringify({name:e,icon_url:t})})}async function za(e){return G(`/servers/${e}/join`,{method:"POST"})}async function Ha(e){return G(`/servers/${e}/members`)}async function Ra(e){return G(`/servers/${e}/channels`)}async function Pa(e,t=50,a){const l=new URLSearchParams({limit:String(t)});return G(`/channels/${e}/messages?${l}`)}async function Wa(e,t){return G(`/channels/${e}/messages`,{method:"POST",body:JSON.stringify({content:t})})}var qa=E('<div class="alert alert-error text-sm"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> <span> </span></div>'),Ja=E('<span class="loading loading-spinner loading-sm"></span>'),Va=E('<div class="flex items-center justify-center h-screen bg-base-300"><div class="card bg-base-100 shadow-2xl w-full max-w-md"><div class="card-body"><div class="text-center mb-4"><h1 class="text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">Subspace</h1> <p class="text-base-content/60 text-sm mt-1"> </p></div> <!> <form class="space-y-4"><fieldset class="fieldset"><label class="fieldset-label" for="username">Username</label> <input id="username" type="text" class="input input-bordered w-full" placeholder="Enter username" required=""/></fieldset> <fieldset class="fieldset"><label class="fieldset-label" for="password">Password</label> <input id="password" type="password" class="input input-bordered w-full" placeholder="Enter password" required=""/></fieldset> <button class="btn btn-primary w-full" type="submit"><!> </button></form> <div class="divider text-xs">OR</div> <button class="btn btn-ghost btn-sm"> </button></div></div></div>');function Fa(e,t){te(t,!0);let a=V(""),l=V(""),u=V(!1),c=V(""),d=V(!1);async function x(){U(c,""),U(d,!0);try{const _=await(s(u)?Na:La)(s(a),s(l));gt.set(_.token),Ae.set(_.user)}catch(j){U(c,j.message||"Something went wrong",!0)}finally{U(d,!1)}}var p=Va(),k=i(p),f=i(k),$=i(f),w=b(i($),2),M=i(w,!0);o(w),o($);var A=b($,2);{var S=j=>{var _=qa(),z=b(i(_),2),Z=i(z,!0);o(z),o(_),D(()=>B(Z,s(c))),y(j,_)};O(A,j=>{s(c)&&j(S)})}var n=b(A,2),h=i(n),L=b(i(h),2);Se(L),o(h);var N=b(h,2),g=b(i(N),2);Se(g),o(N);var T=b(N,2),m=i(T);{var r=j=>{var _=Ja();y(j,_)};O(m,j=>{s(d)&&j(r)})}var v=b(m);o(T),o(n);var C=b(n,4),I=i(C,!0);o(C),o(f),o(k),o(p),D(()=>{B(M,s(u)?"Create your account":"Welcome back"),T.disabled=s(d),B(v,` ${s(u)?"Create Account":"Sign In"}`),B(I,s(u)?"Already have an account? Sign in":"Need an account? Register")}),$e(L,()=>s(a),j=>U(a,j)),$e(g,()=>s(l),j=>U(l,j)),R("submit",n,Ze(x)),R("click",C,()=>{U(u,!s(u)),U(c,"")}),y(e,p),ae()}const Ka="ws://localhost:3001/ws";let J=null,De=null;function Mt(){(J==null?void 0:J.readyState)!==WebSocket.OPEN&&(J=new WebSocket(Ka),J.onopen=()=>{const e=ua(gt);e&&Ne({type:"auth",payload:{token:e}})},J.onmessage=e=>{try{const t=JSON.parse(e.data);Za(t)}catch(t){console.error("WS parse error:",t)}},J.onclose=()=>{J=null,De=setTimeout(Mt,3e3)},J.onerror=()=>{J==null||J.close()})}function Ya(){De&&clearTimeout(De),De=null,J==null||J.close(),J=null}function Ne(e){(J==null?void 0:J.readyState)===WebSocket.OPEN&&J.send(JSON.stringify(e))}function Xa(e){Ne({type:"typing",payload:{channel_id:e}})}function Qa(e){Ne({type:"join_voice",payload:{channel_id:e}})}function Ga(){Ne({type:"leave_voice",payload:{}})}function dt(e,t){Ne({type:"voice_mute_deafen",payload:{muted:e,deafened:t}})}function Za(e){switch(e.type){case"auth_success":console.log("WebSocket authenticated");break;case"message_created":{const t=e.payload.message;me.update(a=>[...a,t]);break}case"message_deleted":{const{message_id:t}=e.payload;me.update(a=>a.filter(l=>l.id!==t));break}case"message_updated":{const{message_id:t,content:a,edited_at:l}=e.payload;me.update(u=>u.map(c=>c.id===t?{...c,content:a,edited_at:l}:c));break}case"reaction_updated":{const{message_id:t,reactions:a}=e.payload;me.update(l=>l.map(u=>u.id===t?{...u,reactions:a}:u));break}case"voice_state_update":{const{channel_id:t,voice_states:a}=e.payload;_t.update(l=>({...l,[t]:a}));break}case"user_typing":break;case"signal_sdp":case"signal_ice":typeof window<"u"&&window.dispatchEvent(new CustomEvent("webrtc_signal",{detail:e}));break;case"error":console.error("WS error:",e.payload.message);break;default:console.warn("Unknown WS message:",e.type)}}var er=E('<span class="absolute -left-1 top-1/2 -translate-y-1/2 w-1 h-8 bg-base-content rounded-r-full"></span>'),tr=E('<img class="w-full h-full rounded-[inherit] object-cover"/>'),ar=E('<div class="indicator"><!> <button><!></button></div>'),rr=E('<img alt="avatar" class="w-full h-full rounded-full object-cover"/>'),sr=Ue('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.573-1.066z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'),nr=E('<div class="flex flex-col items-center w-[72px] bg-base-300 py-3 gap-2 shrink-0 overflow-y-auto"><button class="w-12 h-12 rounded-2xl bg-primary/20 text-primary flex items-center justify-center hover:rounded-xl hover:bg-primary hover:text-primary-content transition-all duration-200" title="Home"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg></button> <div class="w-8 h-0.5 bg-base-content/10 rounded-full"></div> <!> <button class="w-12 h-12 rounded-[24px] bg-base-100 text-success flex items-center justify-center hover:bg-success hover:text-success-content hover:rounded-xl transition-all duration-200" title="Add a Server"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></button> <div class="flex-1"></div> <button class="w-12 h-12 rounded-full bg-base-100 flex items-center justify-center text-xs font-bold hover:ring-2 ring-primary transition-all" title="Settings"><!></button></div>');function or(e,t){te(t,!0);const a=()=>H(tt,"$servers",c),l=()=>H(xt,"$currentServerId",c),u=()=>H(Ae,"$currentUser",c),[c,d]=ue();function x(S){return S.split(/\s+/).map(n=>n[0]).join("").slice(0,2).toUpperCase()}var p=nr(),k=b(i(p),4);de(k,1,a,S=>S.id,(S,n)=>{var h=ar(),L=i(h);{var N=v=>{var C=er();y(v,C)};O(L,v=>{s(n).id===l()&&v(N)})}var g=b(L,2),T=i(g);{var m=v=>{var C=tr();D(()=>{K(C,"src",s(n).icon_url),K(C,"alt",s(n).name)}),y(v,C)},r=v=>{var C=Oe();D(I=>B(C,I),[()=>x(s(n).name)]),y(v,C)};O(T,v=>{s(n).icon_url?v(m):v(r,!1)})}o(g),o(h),D(()=>{be(g,1,`w-12 h-12 rounded-[24px] flex items-center justify-center text-sm font-semibold transition-all duration-200
          ${s(n).id===l()?"bg-primary text-primary-content rounded-xl":"bg-base-100 text-base-content hover:bg-primary/30 hover:text-primary hover:rounded-xl"}`),K(g,"title",s(n).name)}),R("click",g,()=>t.onSelectServer(s(n).id)),y(S,h)});var f=b(k,2),$=b(f,4),w=i($);{var M=S=>{var n=rr();D(()=>K(n,"src",u().avatar_url)),y(S,n)},A=S=>{var n=Ee(),h=ke(n);{var L=g=>{var T=Oe();D(m=>B(T,m),[()=>x(u().username)]),y(g,T)},N=g=>{var T=sr();y(g,T)};O(h,g=>{u()?g(L):g(N,!1)},!0)}y(S,n)};O(w,S=>{var n;(n=u())!=null&&n.avatar_url?S(M):S(A,!1)})}o($),o(p),R("click",f,()=>ye.set(!0)),R("click",$,()=>je.set(!0)),y(e,p),ae(),d()}var ir=E('<li><button><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 shrink-0 opacity-60" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <span class="truncate"> </span></button></li>'),lr=E('<div><h3 class="text-xs font-semibold uppercase text-base-content/50 px-2 mb-1 tracking-wider">Text Channels</h3> <ul class="menu menu-sm p-0 gap-0.5"></ul></div>'),cr=Ue('<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-error" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path></svg>'),vr=E('<li class="flex items-center gap-2 text-xs text-base-content/50 py-0.5 px-1"><div class="w-5 h-5 rounded-full bg-base-300 flex items-center justify-center text-[10px] font-bold"> </div> <span class="truncate"> </span> <!></li>'),dr=E('<ul class="ml-6 mt-0.5 space-y-0.5"></ul>'),ur=E('<li><button><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 shrink-0 opacity-60" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072M12 6a7.975 7.975 0 015.657 2.343M6.343 6.343A7.975 7.975 0 0012 18a7.975 7.975 0 005.657-2.343M9.879 9.879a3 3 0 004.242 4.242"></path></svg> <span class="truncate"> </span></button> <!></li>'),fr=E('<div><h3 class="text-xs font-semibold uppercase text-base-content/50 px-2 mb-1 tracking-wider">Voice Channels</h3> <ul class="menu menu-sm p-0 gap-0.5"></ul></div>'),pr=E('<div class="flex flex-col w-60 bg-base-200 shrink-0 overflow-hidden"><div class="h-12 flex items-center px-4 shadow-md bg-base-200 border-b border-base-300"><h2 class="font-semibold text-base-content truncate"> </h2></div> <div class="flex-1 overflow-y-auto p-2 space-y-4"><!> <!></div></div>');function hr(e,t){te(t,!0);const a=()=>H(wt,"$currentServer",p),l=()=>H(_a,"$textChannels",p),u=()=>H(Qe,"$currentChannelId",p),c=()=>H(xa,"$voiceChannels",p),d=()=>H(_t,"$voiceStates",p),x=()=>H(Ie,"$voiceChannelId",p),[p,k]=ue();function f(g){Qa(g),Ie.set(g)}var $=pr(),w=i($),M=i(w),A=i(M,!0);o(M),o(w);var S=b(w,2),n=i(S);{var h=g=>{var T=lr(),m=b(i(T),2);de(m,5,l,r=>r.id,(r,v)=>{var C=ir(),I=i(C),j=b(i(I),2),_=i(j,!0);o(j),o(I),o(C),D(()=>{be(I,1,`flex items-center gap-2 rounded-md px-2 py-1.5
                  ${s(v).id===u()?"bg-base-300 text-base-content":"text-base-content/60 hover:text-base-content hover:bg-base-300/50"}`),B(_,s(v).name)}),R("click",I,()=>t.onSelectChannel(s(v).id)),y(r,C)}),o(m),o(T),y(g,T)};O(n,g=>{l().length>0&&g(h)})}var L=b(n,2);{var N=g=>{var T=fr(),m=b(i(T),2);de(m,5,c,r=>r.id,(r,v)=>{const C=Me(()=>d()[s(v).id]||[]);var I=ur(),j=i(I),_=b(i(j),2),z=i(_,!0);o(_),o(j);var Z=b(j,2);{var re=ee=>{var Y=dr();de(Y,21,()=>s(C),F=>F.user_id,(F,P)=>{var X=vr(),fe=i(X),ge=i(fe,!0);o(fe);var se=b(fe,2),pe=i(se,!0);o(se);var he=b(se,2);{var Be=ne=>{var ze=cr();y(ne,ze)};O(he,ne=>{s(P).muted&&ne(Be)})}o(X),D(ne=>{B(ge,ne),B(pe,s(P).username??"Unknown")},[()=>(s(P).username??"?")[0].toUpperCase()]),y(F,X)}),o(Y),y(ee,Y)};O(Z,ee=>{s(C).length>0&&ee(re)})}o(I),D(()=>{be(j,1,`flex items-center gap-2 rounded-md px-2 py-1.5
                  ${s(v).id===x()?"bg-success/20 text-success":"text-base-content/60 hover:text-base-content hover:bg-base-300/50"}`),B(z,s(v).name)}),R("click",j,()=>f(s(v).id)),y(r,I)}),o(m),o(T),y(g,T)};O(L,g=>{c().length>0&&g(N)})}o(S),o($),D(()=>{var g;return B(A,((g=a())==null?void 0:g.name)??"")}),y(e,$),ae(),k()}var mr=E('<img alt="" class="w-full h-full rounded-full object-cover"/>'),br=E('<span class="text-xs text-base-content/30">(edited)</span>'),gr=E('<img class="max-w-xs max-h-60 rounded-lg"/>'),_r=E('<a target="_blank" class="link link-primary text-sm"> </a>'),xr=E('<div class="flex flex-wrap gap-2 mt-1"></div>'),wr=E('<span class="badge badge-sm badge-ghost gap-1 cursor-pointer hover:bg-primary/20"> </span>'),yr=E('<div class="flex flex-wrap gap-1 mt-1"></div>'),kr=E('<div class="flex gap-3 pt-3 hover:bg-base-200/30 px-2 rounded-lg group"><div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-sm font-bold text-primary shrink-0 mt-0.5"><!></div> <div class="flex-1 min-w-0"><div class="flex items-baseline gap-2"><span class="font-semibold text-sm text-base-content"> </span> <span class="text-xs text-base-content/40"> </span> <!></div> <p class="text-sm text-base-content/90 whitespace-pre-wrap break-words"> </p> <!> <!></div></div>'),Sr=E('<div class="flex gap-3 hover:bg-base-200/30 px-2 rounded-lg group"><div class="w-10 shrink-0 flex items-start justify-center"><span class="text-[10px] text-base-content/0 group-hover:text-base-content/30 transition-colors"> </span></div> <div class="flex-1 min-w-0"><p class="text-sm text-base-content/90 whitespace-pre-wrap break-words"> </p></div></div>'),$r=E('<div class="flex flex-col flex-1 min-w-0"><div class="h-12 flex items-center px-4 gap-2 shadow-sm bg-base-100 border-b border-base-300 shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-base-content/40" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <h3 class="font-semibold text-base-content"> </h3></div> <div class="flex-1 overflow-y-auto p-4 space-y-1"></div> <div class="px-4 pb-4 shrink-0"><div class="bg-base-300 rounded-lg flex items-end"><textarea class="textarea textarea-ghost flex-1 resize-none min-h-[44px] max-h-40 text-sm border-none focus:outline-none bg-transparent" rows="1"></textarea> <button class="btn btn-ghost btn-sm m-1 text-primary"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></button></div></div></div>');function Cr(e,t){te(t,!0);const a=()=>H(me,"$messages",u),l=()=>H(yt,"$currentChannel",u),[u,c]=ue();let d=V(""),x=V(void 0),p=null;fa(()=>{a()&&mt().then(()=>k())});function k(){s(x)&&(s(x).scrollTop=s(x).scrollHeight)}async function f(){const m=s(d).trim();if(!(!m||!l())){U(d,"");try{await Wa(l().id,m)}catch(r){console.error("Send error:",r)}}}function $(m){m.key==="Enter"&&!m.shiftKey?(m.preventDefault(),f()):!p&&l()&&(Xa(l().id),p=setTimeout(()=>{p=null},3e3))}function w(m){const r=new Date(m),v=new Date;return r.toDateString()===v.toDateString()?r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):r.toLocaleDateString([],{month:"short",day:"numeric"})+" "+r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}var M=$r(),A=i(M),S=b(i(A),2),n=i(S,!0);o(S),o(A);var h=b(A,2);de(h,7,a,m=>m.id,(m,r,v)=>{const C=Me(()=>s(v)>0?a()[s(v)-1]:null),I=Me(()=>s(C)&&s(C).author_id===s(r).author_id),j=Me(()=>s(C)?new Date(s(r).created_at).getTime()-new Date(s(C).created_at).getTime():1/0),_=Me(()=>s(I)&&s(j)<3e5);var z=Ee(),Z=ke(z);{var re=Y=>{var F=kr(),P=i(F),X=i(P);{var fe=q=>{var W=mr();D(()=>K(W,"src",s(r).author.avatar_url)),y(q,W)},ge=q=>{var W=Oe();D(ie=>B(W,ie),[()=>{var ie;return(((ie=s(r).author)==null?void 0:ie.username)??"?")[0].toUpperCase()}]),y(q,W)};O(X,q=>{var W;(W=s(r).author)!=null&&W.avatar_url?q(fe):q(ge,!1)})}o(P);var se=b(P,2),pe=i(se),he=i(pe),Be=i(he,!0);o(he);var ne=b(he,2),ze=i(ne,!0);o(ne);var Tt=b(ne,2);{var jt=q=>{var W=br();y(q,W)};O(Tt,q=>{s(r).edited_at&&q(jt)})}o(pe);var He=b(pe,2),Et=i(He,!0);o(He);var rt=b(He,2);{var At=q=>{var W=xr();de(W,21,()=>s(r).attachments,lt,(ie,le)=>{var _e=Ee(),Re=ke(_e);{var Lt=xe=>{var ce=gr();D(()=>{K(ce,"src",s(le).file_url),K(ce,"alt",s(le).file_name)}),y(xe,ce)},Dt=xe=>{var ce=_r(),Ot=i(ce);o(ce),D(()=>{K(ce,"href",s(le).file_url),B(Ot,`ðŸ“Ž ${s(le).file_name??""}`)}),y(xe,ce)};O(Re,xe=>{s(le).mime_type.startsWith("image/")?xe(Lt):xe(Dt,!1)})}y(ie,_e)}),o(W),y(q,W)};O(rt,q=>{s(r).attachments.length>0&&q(At)})}var It=b(rt,2);{var Nt=q=>{var W=yr();de(W,21,()=>s(r).reactions,lt,(ie,le)=>{var _e=wr(),Re=i(_e);o(_e),D(()=>B(Re,`${s(le).emoji??""}
                                        ${s(le).count??""}`)),y(ie,_e)}),o(W),y(q,W)};O(It,q=>{s(r).reactions.length>0&&q(Nt)})}o(se),o(F),D(q=>{var W;B(Be,((W=s(r).author)==null?void 0:W.username)??"Unknown"),B(ze,q),B(Et,s(r).content??"")},[()=>w(s(r).created_at)]),y(Y,F)},ee=Y=>{var F=Sr(),P=i(F),X=i(P),fe=i(X,!0);o(X),o(P);var ge=b(P,2),se=i(ge),pe=i(se,!0);o(se),o(ge),o(F),D(he=>{B(fe,he),B(pe,s(r).content??"")},[()=>new Date(s(r).created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]),y(Y,F)};O(Z,Y=>{s(_)?Y(ee,!1):Y(re)})}y(m,z)}),o(h),ga(h,m=>U(x,m),()=>s(x));var L=b(h,2),N=i(L),g=i(N);pa(g);var T=b(g,2);o(N),o(L),o(M),D(m=>{var r,v;B(n,((r=l())==null?void 0:r.name)??""),K(g,"placeholder",`Message #${((v=l())==null?void 0:v.name)??"..."??""}`),T.disabled=m},[()=>!s(d).trim()]),$e(g,()=>s(d),m=>U(d,m)),R("keydown",g,$),R("click",T,f),y(e,M),ae(),c()}var Mr=E('<img alt="" class="w-full h-full rounded-full object-cover"/>'),Tr=E('<p class="text-[10px] text-warning">Owner</p>'),jr=E('<li class="flex items-center gap-2 px-2 py-1.5 rounded-md hover:bg-base-300/50 cursor-pointer"><div class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-xs font-bold text-primary shrink-0"><!></div> <div class="flex-1 min-w-0"><p class="text-sm text-base-content truncate"> </p> <!></div></li>'),Er=E('<div class="w-60 bg-base-200 shrink-0 overflow-hidden flex flex-col border-l border-base-300"><div class="h-12 flex items-center px-4 border-b border-base-300"><h3 class="text-xs font-semibold uppercase text-base-content/50 tracking-wider"> </h3></div> <div class="flex-1 overflow-y-auto p-2"><ul class="space-y-0.5"></ul></div></div>');function Ar(e,t){te(t,!1);const a=()=>H(kt,"$members",l),[l,u]=ue();at();var c=Er(),d=i(c),x=i(d),p=i(x);o(x),o(d);var k=b(d,2),f=i(k);de(f,5,a,$=>$.user_id,($,w)=>{var M=jr(),A=i(M),S=i(A);{var n=r=>{var v=Mr();D(()=>K(v,"src",s(w).avatar_url)),y(r,v)},h=r=>{var v=Oe();D(C=>B(v,C),[()=>s(w).username[0].toUpperCase()]),y(r,v)};O(S,r=>{s(w).avatar_url?r(n):r(h,!1)})}o(A);var L=b(A,2),N=i(L),g=i(N,!0);o(N);var T=b(N,2);{var m=r=>{var v=Tr();y(r,v)};O(T,r=>{s(w).role==="owner"&&r(m)})}o(L),o(M),D(()=>B(g,s(w).username)),y($,M)}),o(f),o(k),o(c),D(()=>B(p,`Members â€” ${a().length??""}`)),y(e,c),ae(),u()}var Ir=E('<span class="text-xs text-base-content/40"> </span>'),Nr=Ue('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path></svg>'),Lr=Ue('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>'),Dr=E('<div class="flex items-center gap-2 px-4 py-2 bg-base-300 border-t border-base-content/10"><div class="flex items-center gap-2 flex-1 min-w-0"><div class="w-2 h-2 rounded-full bg-success animate-pulse"></div> <span class="text-sm text-success font-medium">Voice Connected</span> <!></div> <div class="flex items-center gap-1"><button><!></button> <button><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg></button> <button class="btn btn-ghost btn-sm btn-square text-error" title="Disconnect"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M5 3a2 2 0 00-2 2v1c0 8.284 6.716 15 15 15h1a2 2 0 002-2v-3.28a1 1 0 00-.684-.948l-4.493-1.498a1 1 0 00-1.21.502l-1.13 2.257a11.042 11.042 0 01-5.516-5.517l2.257-1.128a1 1 0 00.502-1.21L9.228 3.683A1 1 0 008.279 3H5z"></path></svg></button></div></div>');function Or(e,t){te(t,!1);const a=()=>H(x,"$voiceChannel",c),l=()=>H(Ve,"$isMuted",c),u=()=>H(Fe,"$isDeafened",c),[c,d]=ue(),x=ha([St,Ie],([m,r])=>m.find(v=>v.id===r)??null);function p(){Ve.update(m=>{const r=!m;return dt(r,!1),r})}function k(){Fe.update(m=>{const r=!m;return dt(!1,r),r})}function f(){Ga(),Ie.set(null),Ve.set(!1),Fe.set(!1)}at();var $=Dr(),w=i($),M=b(i(w),4);{var A=m=>{var r=Ir(),v=i(r);o(r),D(()=>B(v,`/ ${a().name??""}`)),y(m,r)};O(M,m=>{a()&&m(A)})}o(w);var S=b(w,2),n=i(S),h=i(n);{var L=m=>{var r=Nr();y(m,r)},N=m=>{var r=Lr();y(m,r)};O(h,m=>{l()?m(L):m(N,!1)})}o(n);var g=b(n,2),T=b(g,2);o(S),o($),D(()=>{be(n,1,`btn btn-ghost btn-sm btn-square ${l()?"text-error":"text-base-content/60"}`),K(n,"title",l()?"Unmute":"Mute"),be(g,1,`btn btn-ghost btn-sm btn-square ${u()?"text-error":"text-base-content/60"}`),K(g,"title",u()?"Undeafen":"Deafen")}),R("click",n,p),R("click",g,k),R("click",T,f),y(e,$),ae(),d()}var Ur=E('<div class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center"><div class="card bg-base-100 w-full max-w-lg shadow-2xl"><div class="card-body"><div class="flex items-center justify-between mb-4"><h2 class="card-title">User Settings</h2> <button class="btn btn-ghost btn-sm btn-square"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <fieldset class="fieldset"><label class="fieldset-label" for="settings-username">Username</label> <input id="settings-username" type="text" class="input input-bordered w-full"/></fieldset> <button class="btn btn-primary btn-sm mt-2"> </button> <div class="divider"></div> <div class="flex items-center justify-between"><span class="text-sm font-medium">Theme</span> <label class="swap swap-rotate"><input type="checkbox"/> <svg class="swap-on h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg> <svg class="swap-off h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg></label></div> <div class="divider"></div> <button class="btn btn-error btn-outline btn-sm">Log Out</button></div></div></div>');function Br(e,t){var r;te(t,!0);const a=()=>H(Ae,"$currentUser",u),l=()=>H(it,"$theme",u),[u,c]=ue();let d=V(ma(((r=a())==null?void 0:r.username)??"")),x=V(!1);async function p(){U(x,!0);try{await Oa({username:s(d)}),Ae.update(v=>v&&{...v,username:s(d)})}catch(v){console.error("Save error:",v)}finally{U(x,!1)}}function k(){const v=l()==="subspace-dark"?"subspace-light":"subspace-dark";it.set(v)}var f=Ur(),$=i(f),w=i($),M=i(w),A=b(i(M),2);o(M);var S=b(M,2),n=b(i(S),2);Se(n),o(S);var h=b(S,2),L=i(h,!0);o(h);var N=b(h,4),g=b(i(N),2),T=i(g);Se(T),ba(4),o(g),o(N);var m=b(N,4);o(w),o($),o(f),D(()=>{h.disabled=s(x),B(L,s(x)?"Saving...":"Save Changes"),ja(T,l()==="subspace-light")}),R("click",A,()=>je.set(!1)),$e(n,()=>s(d),v=>U(d,v)),R("click",h,p),R("change",T,k),R("click",m,()=>{je.set(!1),wa()}),R("click",f,Ct(()=>je.set(!1))),y(e,f),ae(),c()}var zr=E('<div class="alert alert-error text-sm mb-2"> </div>'),Hr=E('<form class="space-y-4"><fieldset class="fieldset"><label class="fieldset-label" for="server-name">Server Name</label> <input id="server-name" type="text" class="input input-bordered w-full" placeholder="My Awesome Server" required=""/></fieldset> <button class="btn btn-primary w-full" type="submit"> </button></form>'),Rr=E('<form class="space-y-4"><fieldset class="fieldset"><label class="fieldset-label" for="invite-code">Server ID</label> <input id="invite-code" type="text" class="input input-bordered w-full" placeholder="Paste server ID" required=""/></fieldset> <button class="btn btn-primary w-full" type="submit"> </button></form>'),Pr=E('<div class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center"><div class="card bg-base-100 w-full max-w-md shadow-2xl"><div class="card-body"><h2 class="card-title text-center justify-center mb-2"> </h2> <div class="tabs tabs-boxed mb-4 justify-center"><button>Create</button> <button>Join</button></div> <!> <!> <button class="btn btn-ghost btn-sm mt-2">Cancel</button></div></div></div>');function Wr(e,t){te(t,!0);let a=V("create"),l=V(""),u=V(""),c=V(!1),d=V("");async function x(){if(s(l).trim()){U(c,!0),U(d,"");try{const r=await Ba(s(l).trim());tt.update(v=>[...v,r]),ye.set(!1),t.onCreated(r.id)}catch(r){U(d,r.message,!0)}finally{U(c,!1)}}}async function p(){if(s(u).trim()){U(c,!0),U(d,"");try{await za(s(u).trim()),ye.set(!1)}catch(r){U(d,r.message,!0)}finally{U(c,!1)}}}var k=Pr(),f=i(k),$=i(f),w=i($),M=i(w,!0);o(w);var A=b(w,2),S=i(A),n=b(S,2);o(A);var h=b(A,2);{var L=r=>{var v=zr(),C=i(v,!0);o(v),D(()=>B(C,s(d))),y(r,v)};O(h,r=>{s(d)&&r(L)})}var N=b(h,2);{var g=r=>{var v=Hr(),C=i(v),I=b(i(C),2);Se(I),o(C);var j=b(C,2),_=i(j,!0);o(j),o(v),D(()=>{j.disabled=s(c),B(_,s(c)?"Creating...":"Create Server")}),$e(I,()=>s(l),z=>U(l,z)),R("submit",v,Ze(x)),y(r,v)},T=r=>{var v=Rr(),C=i(v),I=b(i(C),2);Se(I),o(C);var j=b(C,2),_=i(j,!0);o(j),o(v),D(()=>{j.disabled=s(c),B(_,s(c)?"Joining...":"Join Server")}),$e(I,()=>s(u),z=>U(u,z)),R("submit",v,Ze(p)),y(r,v)};O(N,r=>{s(a)==="create"?r(g):r(T,!1)})}var m=b(N,2);o($),o(f),o(k),D(()=>{B(M,s(a)==="create"?"Create a Server":"Join a Server"),be(S,1,`tab ${s(a)==="create"?"tab-active":""}`),be(n,1,`tab ${s(a)==="join"?"tab-active":""}`)}),R("click",S,()=>{U(a,"create"),U(d,"")}),R("click",n,()=>{U(a,"join"),U(d,"")}),R("click",m,()=>ye.set(!1)),R("click",k,Ct(()=>ye.set(!1))),y(e,k),ae()}var qr=E('<div class="flex-1 flex items-center justify-center text-base-content/40"><div class="text-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 opacity-30" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg> <p class="text-lg">Select a text channel to start chatting</p></div></div>'),Jr=E('<div class="flex h-screen w-screen overflow-hidden"><!> <!> <div class="flex-1 flex flex-col min-w-0"><!> <!></div> <!></div> <!> <!>',1);function Vr(e,t){te(t,!1);const a=()=>H(wt,"$currentServer",x),l=()=>H(yt,"$currentChannel",x),u=()=>H(Ie,"$voiceChannelId",x),c=()=>H(je,"$showSettings",x),d=()=>H(ye,"$showCreateServer",x),[x,p]=ue();bt(async()=>{try{const _=await Da();Ae.set(_);const z=await Ua();tt.set(z),z.length>0&&await k(z[0].id),Mt()}catch(_){console.error("Init error:",_)}return()=>Ya()});async function k(_){xt.set(_);const[z,Z]=await Promise.all([Ra(_),Ha(_)]);St.set(z),kt.set(Z);const re=z.find(ee=>ee.type==="text");re?await f(re.id):(Qe.set(null),me.set([]))}async function f(_){Qe.set(_);const z=await Pa(_);me.set(z)}at();var $=Jr(),w=ke($),M=i(w);or(M,{onSelectServer:k});var A=b(M,2);{var S=_=>{hr(_,{onSelectChannel:f})};O(A,_=>{a()&&_(S)})}var n=b(A,2),h=i(n);{var L=_=>{Cr(_,{})},N=_=>{var z=qr();y(_,z)};O(h,_=>{l()&&l().type==="text"?_(L):_(N,!1)})}var g=b(h,2);{var T=_=>{Or(_,{})};O(g,_=>{u()&&_(T)})}o(n);var m=b(n,2);{var r=_=>{Ar(_,{})};O(m,_=>{a()&&_(r)})}o(w);var v=b(w,2);{var C=_=>{Br(_,{})};O(v,_=>{c()&&_(C)})}var I=b(v,2);{var j=_=>{Wr(_,{onCreated:k})};O(I,_=>{d()&&_(j)})}y(e,$),ae(),p()}var Fr=E('<div class="flex items-center justify-center h-screen"><span class="loading loading-ring loading-lg text-primary"></span></div>');function ts(e,t){te(t,!0);const a=()=>H(ya,"$isLoggedIn",l),[l,u]=ue();let c=V(!1);bt(()=>{U(c,!0)});var d=Ee(),x=ke(d);{var p=f=>{var $=Fr();y(f,$)},k=f=>{var $=Ee(),w=ke($);{var M=S=>{Vr(S,{})},A=S=>{Fa(S,{})};O(w,S=>{a()?S(M):S(A,!1)},!0)}y(f,$)};O(x,f=>{s(c)?f(k,!1):f(p)})}y(e,d),ae(),u()}export{ts as component};
